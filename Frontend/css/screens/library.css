:root {
    /* Cores baseadas no seu tema, mas adaptadas para o estilo 'Button 3D' */
    --node-size: 80px;
    --btn-depth: 6px;
    /* Profundidade do botão 3D */

    /* Cores de Estado */
    --locked-color: #e5e5e5;
    --locked-depth: #cecece;
    --active-color: #ffc800;
    /* Amarelo Ouro (Foco) */
    --active-depth: #e5b400;
    --completed-color: #58cc02;
    /* Verde Conquista */
    --completed-depth: #46a302;

    /* Card Flutuante */
    --popover-bg: #ffffff;
    --popover-text: #3c3c3c;
}

/* --- CONTAINER DA TRILHA --- */
.timeline-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 0;
    position: relative;
    width: 100%;
}

/* Oculta as linhas SVG antigas pois faremos via CSS ou simplificado */
.timeline-content svg {
    display: none;
}

/* --- NÓ DO FILÓSOFO (ESTILO DUOLINGO) --- */
.philosopher-node {
    position: relative !important;
    /* Sobrescreve o inline style do JS */
    left: auto !important;
    top: auto !important;
    width: var(--node-size);
    height: var(--node-size);
    margin: 15px 0;
    /* Espaçamento vertical */
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.1s;
    z-index: 2;
    background-color: white;
    /* Fundo para imagem transparente */

    /* O Efeito 3D do Botão */
    box-shadow: 0 var(--btn-depth) 0 var(--locked-depth);
    border: 2px solid var(--locked-depth);
}

.philosopher-node img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    padding: 4px;
    /* Borda interna branca */
    background: white;
    filter: grayscale(100%);
    opacity: 0.6;
}

/* --- ESTADOS DO NÓ --- */

/* Bloqueado */
.philosopher-node.locked {
    pointer-events: none;
}

/* Disponível / Atual (Onde o jogador está) */
.philosopher-node.available,
.philosopher-node.active {
    box-shadow: 0 var(--btn-depth) 0 var(--active-depth);
    border-color: var(--active-depth);
    animation: bounce 2s infinite;
}

.philosopher-node.available img,
.philosopher-node.active img {
    filter: none;
    opacity: 1;
}

/* Completado (Dourado/Masterizado) */
.philosopher-node.maxed {
    box-shadow: 0 var(--btn-depth) 0 var(--completed-depth);
    border-color: var(--completed-depth);
}

.philosopher-node.maxed img {
    filter: none;
    opacity: 1;
    border: 4px solid var(--completed-color);
}

/* Efeito de Clique (Afunda o botão) */
.philosopher-node:active {
    transform: translateY(var(--btn-depth));
    box-shadow: 0 0 0 var(--active-depth);
}

/* --- PROGRESSO CIRCULAR (Anel ao redor) --- */
.progress-ring {
    position: absolute;
    top: -8px;
    left: -8px;
    width: calc(100% + 16px);
    height: calc(100% + 16px);
    pointer-events: none;
    z-index: -1;
}

/* --- MINI CARD FLUTUANTE (O "Start Popup") --- */
.mini-lesson-card {
    position: absolute;
    background: var(--popover-bg);
    border: 2px solid #e5e5e5;
    border-radius: 16px;
    padding: 15px;
    width: 260px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    z-index: 100;
    text-align: center;
    opacity: 0;
    transform: translateY(10px) scale(0.9);
    transition: all 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    pointer-events: none;
}

.mini-lesson-card.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

/* Setinha do card */
.mini-lesson-card::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 10px 10px 0;
    border-style: solid;
    border-color: var(--popover-bg) transparent transparent transparent;
}

.mini-card-header {
    font-family: 'Playfair Display', serif;
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 5px;
    color: #333;
}

.mini-card-desc {
    font-size: 0.85rem;
    color: #777;
    margin-bottom: 15px;
}

.mini-start-btn {
    width: 100%;
    padding: 12px;
    border-radius: 12px;
    border: none;
    background: var(--active-color);
    /* Cor do tema */
    color: #333;
    font-weight: 800;
    font-family: 'Inter', sans-serif;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 4px 0 var(--active-depth);
    /* Efeito 3D no botão */
    cursor: pointer;
    transition: all 0.1s;
}

.mini-start-btn:active {
    transform: translateY(4px);
    box-shadow: 0 0 0 var(--active-depth);
}

/* --- EFEITO ZIG-ZAG (CAMINHO) --- */
/* Move os nós para esquerda/direita alternadamente */
.philosopher-node:nth-child(odd) {
    transform: translateX(-30px);
}

.philosopher-node:nth-child(even) {
    transform: translateX(30px);
}

/* Correção para o clique (manter o translate e somar o active) */
.philosopher-node:nth-child(odd):active {
    transform: translateX(-30px) translateY(var(--btn-depth));
}

.philosopher-node:nth-child(even):active {
    transform: translateX(30px) translateY(var(--btn-depth));
}

@keyframes bounce {

    0%,
    100% {
        transform: translateX(var(--offset-x, -30px)) scale(1);
    }

    50% {
        transform: translateX(var(--offset-x, -30px)) scale(1.05);
    }
}